<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Urban Lunch</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #ffffff; --text: #1a1a1a; --accent: #000000; --gray: #f5f5f7; --red: #ff3b30; }
        body { font-family: -apple-system, system-ui, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 100px; -webkit-tap-highlight-color: transparent; }
        .header { text-align: center; padding: 20px; font-weight: 900; font-size: 22px; border-bottom: 1px solid #eee; }
        .tabs { display: flex; overflow-x: auto; padding: 12px; gap: 8px; sticky: top; background: #fff; z-index: 100; }
        .tabs::-webkit-scrollbar { display: none; }
        .tab { padding: 10px 18px; background: var(--gray); border-radius: 25px; white-space: nowrap; font-size: 14px; font-weight: 600; cursor: pointer; }
        .tab.active { background: var(--accent); color: #fff; }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 12px; }
        .card { background: #fff; border-radius: 20px; border: 1px solid #f0f0f0; padding: 10px; transition: 0.2s; overflow: hidden; }
        .card.selected-to-hide { border: 2px solid var(--red); background: #fff5f5; }
        
        /* Стили для фото */
        .card-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; border-radius: 15px; margin-bottom: 10px; background: var(--gray); }
        
        .card-name { font-weight: 700; font-size: 14px; margin-bottom: 4px; height: 34px; overflow: hidden; }
        .card-price { font-size: 14px; color: #666; font-weight: 600; }

        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; z-index: 1000; align-items: flex-end; }
        .modal-content { background: #fff; width: 100%; border-radius: 30px 30px 0 0; padding: 25px; box-sizing: border-box; max-height: 90vh; overflow-y: auto; }
        .option-group { margin-bottom: 20px; }
        .opt-btn { padding: 10px 14px; border: 1.5px solid #eee; border-radius: 12px; font-size: 13px; font-weight: 600; cursor: pointer; background: #fff; }
        .opt-btn.active { border-color: var(--accent); background: var(--accent); color: #fff; }
        .live-price-bar { background: var(--accent); color: #fff; padding: 18px; border-radius: 16px; display: flex; justify-content: space-between; width: 100%; border: none; font-weight: 700; font-size: 16px; }
        input { width: 100%; padding: 15px; background: var(--gray); border: none; border-radius: 12px; font-size: 16px; margin-bottom: 10px; box-sizing: border-box; }
    </style>
</head>
<body>

<div id="admin-panel" onclick="saveAdminChanges()" style="position:fixed;top:0;width:100%;background:red;color:#fff;padding:10px;text-align:center;display:none;z-index:2000;">АДМИН: СОХРАНИТЬ</div>
<div class="header" id="main-header">URBAN LUNCH</div>

<div class="tabs">
    <div class="tab active" onclick="filterCat(event, 'coffee')">Кофе</div>
    <div class="tab" onclick="filterCat(event, 'tea')">Чай & Пунши</div>
    <div class="tab" onclick="filterCat(event, 'ice')">Холодные</div>
    <div class="tab" onclick="filterCat(event, 'food')">Сладости</div>
    <div class="tab" onclick="filterCat(event, 'drinks')">Газировка</div>
</div>

<div id="app" class="grid"></div>

<div class="modal" id="opt-modal"><div class="modal-content"><h2 id="m-title"></h2><div class="option-group"><b>Объем</b><div class="option-list" id="m-sizes" style="display:flex;gap:8px;margin-top:10px;"></div></div><div class="option-group"><b>Молоко</b><div class="option-list" id="m-milk" style="display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;"></div></div><div class="option-group"><b>Сироп</b><div class="option-list" id="m-syrups" style="display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;"></div></div><button class="live-price-bar" onclick="confirmItem()"><span>Добавить</span><span id="live-price">0 ₽</span></button><button onclick="closeModal()" style="width:100%;border:none;background:none;margin-top:10px;color:#999;">Отмена</button></div></div>
<div class="modal" id="checkout-modal"><div class="modal-content"><h2>Оформление</h2><input type="number" id="floor" placeholder="Этаж"><input type="text" id="office" placeholder="Офис"><button class="live-price-bar" onclick="finalSend()"><span>Оплатить</span><span id="final-total">0 ₽</span></button></div></div>

<script>
    const tg = window.Telegram.WebApp;
    const IMG_BASE = "https://raw.githubusercontent.com/stejlovv-afk/menu24/main/"; // Путь к твоим фото

    const menu = [
        { id: 1, cat: 'coffee', name: "Капучино", img: "kapuchino.jpg", sizes: {250:190, 350:230, 450:270} },
        { id: 2, cat: 'coffee', name: "Латте", img: "latte.jpg", sizes: {250:190, 350:230, 450:270} },
        { id: 3, cat: 'coffee', name: "Американо", img: "americano.jpg", sizes: {250:180, 350:220, 450:260} },
        { id: 4, cat: 'coffee', name: "Эспрессо", img: "espresso1.jpg", sizes: {30:110, 60:150} },
        { id: 5, cat: 'coffee', name: "Латте Халва", img: "lattehalva.jpg", sizes: {350:290, 450:350} },
        { id: 6, cat: 'coffee', name: "Латте Тыква", img: "lattetikva.jpg", sizes: {350:290, 450:350} },
        { id: 7, cat: 'coffee', name: "Раф Сникерс", img: "rafsnikers.jpg", sizes: {350:320, 450:380} },
        
        { id: 20, cat: 'tea', name: "Чай Черный", img: "teablack.jpg", sizes: {250:120, 450:180} },
        { id: 21, cat: 'tea', name: "Чай Зеленый", img: "greentea.jpg", sizes: {250:120, 450:180} },
        { id: 22, cat: 'tea', name: "Матча", img: "matcha.jpg", sizes: {250:180, 450:260} },
        { id: 23, cat: 'tea', name: "Глинтвейн", img: "glintveinpunch.jpg", sizes: {350:230, 450:270} },
        { id: 24, cat: 'tea', name: "Облепиховый пунш", img: "oblepihapunch.jpg", sizes: {350:230, 450:270} },
        { id: 25, cat: 'tea', name: "Малиновый пунш", img: "malinapunsh.jpg", sizes: {350:230, 450:270} },

        { id: 100, cat: 'food', name: "Bombbar Кокос", img: "bombbarcocos.jpg", price: 130 },
        { id: 101, cat: 'food', name: "Bombbar Фундук", img: "bombbarfunduk.jpg", price: 130 },
        { id: 102, cat: 'food', name: "Snaqer Фундук", img: "snaqerfunduk.jpg", price: 130 },
        { id: 103, cat: 'food', name: "Chika Банан", img: "chikabiscuitbanan.jpg", price: 170 },

        { id: 200, cat: 'drinks', name: "Cola", img: "colachernogo.jpg", price: 140 },
        { id: 201, cat: 'drinks', name: "Байкал", img: "baikalchernogo.jpg", price: 140 },
        { id: 202, cat: 'drinks', name: "Вода", img: "negazcernogo.jpg", price: 70 }
    ];

    let cart = [], isAdmin = false, stopList = [], activeItem = null, selSize = null, selMilk = null, selSyrup = null;

    function render() {
        const app = document.getElementById('app');
        const items = menu.filter(i => i.cat === (window.currentCat || 'coffee'));
        app.innerHTML = items.map(i => `
            <div class="card ${isAdmin && stopList.includes(i.id) ? 'selected-to-hide' : ''}" onclick="itemClick(${i.id})">
                <img src="${IMG_BASE + i.img}" class="card-img" onerror="this.src='https://via.placeholder.com/150'">
                <div class="card-name">${i.name}</div>
                <div class="card-price">${i.price ? i.price+' ₽' : 'от '+Object.values(i.sizes)[0]+' ₽'}</div>
            </div>
        `).join('');
    }

    // Вставь сюда остальные функции (filterCat, itemClick, setSize, confirmItem, finalSend) 
    // из моего ПРЕДЫДУЩЕГО сообщения. Они не изменились.
    
    // ... (логика кликов и отправки данных)
    
    window.currentCat = 'coffee';
    render();
</script>
</body>
</html>
